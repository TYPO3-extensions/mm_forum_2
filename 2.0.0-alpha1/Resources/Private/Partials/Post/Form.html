{namespace mmf=Tx_MmForum_ViewHelpers}
<f:form name="post" object="{post}" controller="Post" action="{action}" id="post">
	<div class="tx-mmforum-form-row tx-mmforum-odd">
		<div class="tx-mmforum-form-left"><label for="text"><f:translate key="Post_New_Text" /></label></div>
		<div class="tx-mmforum-form-right">
			<mmf:form.bbCodeEditor class="tx-mmforum-editor" property="text" id="mmforum_editor" rows="20" cols="80" />
		</div>
	</div>
	<mmf:authentication.ifAccess object="{topic}" accessType="newAttachment">
		<div class="tx-mmforum-form-row tx-mmforum-even">
			<div class="tx-mmforum-form-left"><label for="text"><f:translate key="Post_New_Attachments" /></label></div>
			<div class="tx-mmforum-form-right">
				<f:if condition="{post.attachments}">
					<f:for each="{post.attachments}" as="attachment">
						<div>
							{attachment.filename}, <mmf:format.fileSize>{attachment.filesize}</mmf:format.fileSize>
						</div>
					</f:for>
				</f:if>
				<f:form.upload name="attachments[]" />
			</div>
		</div>
	</mmf:authentication.ifAccess>
	<div class="tx-mmforum-form-row" style="display: none">
		<div class="tx-mmforum-form-right">
			<f:form.hidden name="topic" value="{topic}" />
			<f:form.submit value="{f:translate(key: 'Post_New_Submit')}" />
		</div>
	</div>
</f:form>